<!doctype html>
<html lang="de">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Fahrtenbuch</title>
		<meta name="description" content="Fahrtenbuch" />
		<meta name="author" content="Tamer Aktas" />
		<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2032%2032%22%3E%3Ccircle%20cx%3D%2216%22%20cy%3D%2216%22%20r%3D%2214%22%20fill%3D%22%2310b981%22/%3E%3Ccircle%20cx%3D%2216%22%20cy%3D%2216%22%20r%3D%225%22%20fill%3D%22%23ffffff%22/%3E%3Cpath%20d%3D%22M16%204a12%2012%200%200%201%2012%2012H4A12%2012%200%200%201%2016%204Z%22%20fill%3D%22%23ffffff%22/%3E%3Cpath%20d%3D%22M10%2024l6-3%206%203%22%20stroke%3D%22%23ffffff%22%20stroke-width%3D%222%22%20fill%3D%22none%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22/%3E%3C/svg%3E" />

		<script src="tailwind.config.js"></script>
		<script src="https://cdn.tailwindcss.com"></script>
		<link
			href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css"
			rel="stylesheet"
		/>
		<style>
			html[data-theme="dark"] { --bc: 92% 0 0; }
		</style>
	</head>
	<body class="min-h-screen bg-base-200 font-display text-base-content">
		<header class="navbar bg-base-100/80 backdrop-blur border-b border-base-200 sticky top-0 z-50">
			<div class="navbar-start"></div>
			<div class="navbar-center">
				<a href="#" class="btn btn-ghost gap-3 normal-case text-xl">
					<svg class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
						<circle cx="12" cy="12" r="9" stroke-width="2"/>
						<circle cx="12" cy="12" r="3" stroke-width="2"/>
						<path d="M12 3a9 9 0 0 1 9 9H3a9 9 0 0 1 9-9z" stroke-width="2"/>
						<path d="M7 18l5-3 5 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
					Fahrtenbuch
				</a>
			</div>
			<div class="navbar-end pr-2 sm:pr-4">
				<label class="swap swap-rotate cursor-pointer" aria-label="Theme umschalten">
					<input id="themeToggle" type="checkbox" />
					<svg class="swap-off w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4V2m0 20v-2M4 12H2m20 0h-2M5.64 5.64l1.42 1.42M16.94 16.94l1.42 1.42M5.64 18.36l1.42-1.42M16.94 7.06l1.42-1.42M12 8a4 4 0 100 8 4 4 0 000-8z"/></svg>
					<svg class="swap-on fill-current w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z"/></svg>
				</label>
			</div>
		</header>

		<section class="relative bg-hero">
			<div class="max-w-6xl mx-auto px-4 py-4 sm:py-6">
				<div class="hero min-h-[8rem] sm:min-h-[10rem] bg-base-100/60 rounded-2xl shadow-sm border border-base-200">
					<div class="hero-content text-center">
						<div class="max-w-2xl">
							<h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold tracking-tight">
								Fahrtenbuch Übersicht
							</h1>
							<p class="py-4 text-base-content/70">
								Kompakte Zusammenfassung aller Fahrten inklusive Kilometer- und Fahrtenanzahl.
							</p>
							<div class="flex flex-col sm:flex-row gap-3 justify-center">
								<a href="#tabelle" class="btn btn-primary">Zur Tabelle</a>
								<a href="#statistik" class="btn btn-outline">Zur Statistik</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section id="statistik" class="max-w-6xl mx-auto px-4 py-4 sm:py-6">
			<div class="stats stats-vertical lg:stats-horizontal shadow bg-base-100 border border-base-200 w-full">
				<div class="stat">
					<div class="stat-figure text-primary">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="inline-block w-8 h-8 stroke-current">
							<path d="M4 21l5-18" stroke-width="2" stroke-linecap="round"/>
							<path d="M20 21l-5-18" stroke-width="2" stroke-linecap="round"/>
							<path d="M12 3v4M12 11v4M12 19v2" stroke-width="2" stroke-linecap="round"/>
						</svg>
					</div>
					<div class="stat-title">Gefahrene Kilometer</div>
					<div id="valKM" class="stat-value">0 km</div>
					<div class="stat-desc">Summe aller Fahrten</div>
				</div>

				<div class="stat">
					<div class="stat-figure text-secondary">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="inline-block w-8 h-8 stroke-current">
							<circle cx="8" cy="7" r="2" stroke-width="2"/>
							<circle cx="16" cy="17" r="2" stroke-width="2"/>
							<path d="M8 9v2a4 4 0 004 4h 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					</div>
					<div class="stat-title">Gefahrene Fahrten</div>
					<div id="valFahrt" class="stat-value">0</div>
					<div class="stat-desc">Anzahl der Zeilen</div>
				</div>

				<div class="stat">
					<div class="stat-figure text-accent">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="inline-block w-8 h-8 stroke-current">
							<circle cx="12" cy="12" r="9" stroke-width="2"/>
							<path d="M3 12h18" stroke-width="2" stroke-linecap="round"/>
							<path d="M12 3c3 3 3 15 0 18M12 3c-3 3-3 15 0 18" stroke-width="2" stroke-linecap="round"/>
						</svg>
					</div>
					<div class="stat-title">Erdumrundungen</div>
					<div id="valErdeUmfang" class="stat-value">0</div>
					<div class="stat-desc">≈ km / 40.075</div>
				</div>
			</div>
		</section>

		<section id="tabelle" class="max-w-6xl mx-auto px-4 py-4 sm:py-6">
			<div class="card bg-base-100 border border-base-200 shadow-xl">
				<div class="card-body gap-6">
					<div class="flex flex-col sm:flex-row gap-3 sm:items-center justify-between">
						<h2 class="card-title">Fahrten</h2>
						<label class="input input-bordered flex items-center gap-2 w-full sm:w-auto sm:min-w-[280px]">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 opacity-70"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 015.364 10.82l3.783 3.783a.75.75 0 11-1.06 1.06l-3.784-3.783A6.75 6.75 0 1110.5 3.75zm0 1.5a5.25 5.25 0 100 10.5 5.25 5.25 0 000-10.5z" clip-rule="evenodd"/></svg>
							<input id="search" type="text" class="grow" placeholder="Suche..." aria-label="Tabelle durchsuchen" />
						</label>
					</div>

					<div class="overflow-x-auto">
						<table id="table" class="table table-zebra">
							<thead>
								<tr>
									<th>Datum</th>
									<th>Fahrtstrecke</th>
									<th>KFZ</th>
									<th class="text-right">Strecke (km)</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>03.04.2020</td>
									<td>Bad Camberg - Berlin</td>
									<td>Skoda Yeti</td>
									<td class="text-right">542</td>
								</tr>
								<tr>
									<td>07.04.2020</td>
									<td>Kirchheim unter Teck - Berlin</td>
									<td>Jeep</td>
									<td class="text-right">664</td>
								</tr>
								<tr>
									<td>09.04.2020</td>
									<td>Mühlheim am Main - Berlin</td>
									<td>BMW 528i</td>
									<td class="text-right">535</td>
								</tr>
								<tr>
									<td>18.04.2020</td>
									<td>Hanau - Berlin</td>
									<td>Kia Sportage</td>
									<td class="text-right">534</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</section>

		<footer class="footer grid grid-cols-1 justify-items-center items-center gap-y-1 p-4 md:p-6 bg-base-100 border-t border-base-200 md:relative">
			<aside class="grid-flow-col items-center gap-2 md:absolute md:left-1/2 md:-translate-x-1/2 md:text-center">
				<svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
					<circle cx="12" cy="12" r="9" stroke-width="2"/>
					<circle cx="12" cy="12" r="3" stroke-width="2"/>
					<path d="M12 3a9 9 0 0 1 9 9H3a9 9 0 0 1 9-9z" stroke-width="2"/>
					<path d="M7 18l5-3 5 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
				</svg>
				<p>&copy; <span id="year"></span> Tamer Aktas · Alle Rechte vorbehalten</p>
			</aside>
			<nav class="grid-flow-col gap-2 place-self-center col-span-full mt-1 md:mt-0 md:col-auto md:place-self-center md:justify-self-end">
				<a href="#" class="link link-hover">Nach oben</a>
			</nav>
		</footer>

		<script>
			(function () {
				const table = document.getElementById("table");
				const search = document.getElementById("search");
				const year = document.getElementById("year");
				const valKM = document.getElementById("valKM");
				const valFahrt = document.getElementById("valFahrt");
				const valErde = document.getElementById("valErdeUmfang");
				const themeToggle = document.getElementById("themeToggle");

				// Footer year
				year.textContent = new Date().getFullYear();

				// Theme: default to system preference and allow manual toggle
				const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
				function setTheme(dark) {
					document.documentElement.setAttribute('data-theme', dark ? 'dark' : 'emerald');
					// update toggle visual
					if (themeToggle) themeToggle.checked = dark;
				}
				// initialize
				setTheme(prefersDark);
				// listen to system changes
				if (window.matchMedia) {
					const mq = window.matchMedia('(prefers-color-scheme: dark)');
					mq.addEventListener ? mq.addEventListener('change', (e) => setTheme(e.matches)) : mq.addListener && mq.addListener((e) => setTheme(e.matches));
				}
				// toggle handler
				themeToggle?.addEventListener('change', (e) => setTheme(e.target.checked));

				// Compute stats
				function computeStats() {
					let sumKM = 0;
					let count = 0;
					for (let i = 1; i < table.rows.length; i++) {
						const kmCell = table.rows[i].cells[3];
						if (!kmCell) continue;
						// Skip filtered (hidden) rows
						if (table.rows[i].style && table.rows[i].style.display === "none") continue;
						const num = parseInt(kmCell.textContent.replace(/[^0-9-]/g, ""), 10);
						if (!isNaN(num)) {
							sumKM += num;
							count++;
						}
					}
					valKM.textContent = new Intl.NumberFormat("de-DE").format(sumKM) + " km";
					valFahrt.textContent = count.toString();
					valErde.textContent = (Math.round((sumKM / 40075.017) * 100) / 100).toString();
				}

				// Filter rows by search
				function filterRows(q) {
					const query = q.trim().toLowerCase();
					for (let i = 1; i < table.rows.length; i++) {
						const row = table.rows[i];
						const text = row.textContent.toLowerCase();
						row.style.display = text.includes(query) ? "" : "none";
					}
					computeStats();
				}

				computeStats();
				search?.addEventListener("input", (e) => filterRows(e.target.value));

			})();
		</script>
	</body>
	</html>